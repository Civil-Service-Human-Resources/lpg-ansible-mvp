---
- name: Docker run learning locker API worker
  docker_container:
    name: api-worker
    hostname: api-worker
    image: cshr/lpg-learning-locker:5c6cea37123f575c211ddfb87cc7ce0bfc9f51a2114e277f95c6726688ce6bd6
    state: started
    command: node /opt/learning-locker/worker/dist/server
#    links:
#      - mailhog:mailhog
    recreate: no
    env:
      MONGO_URL: mongodb://data-01:27017/learninglocker
      MONGODB_PATH: mongodb://data-01:27017/learninglocker
      REDIS_HOST: data-01
      REDIS_URL: redis://data-01:6379/0
  tags: learning-locker-app

- name: Docker run learning locker xAPI
  docker_container:
    name: xapi
    hostname: xapi
    image: cshr/lpg-learning-locker:5c6cea37123f575c211ddfb87cc7ce0bfc9f51a2114e277f95c6726688ce6bd6
    state: started
    command: node /opt/xapi-service/dist/server
#    links:
#      - mailhog:mailhog
    published_ports:
      - 8083:8083
    recreate: no
    env:
      MONGO_URL: mongodb://data-01:27017/learninglocker
      MONGODB_PATH: mongodb://data-01:27017/learninglocker
      REDIS_HOST: data-01
      REDIS_URL: redis://data-01:6379/0
  tags: learning-locker-app


